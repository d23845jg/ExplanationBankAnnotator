<html>
<head>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
function close_modify(){
	$("#guidelineModify").hide()
	$("#statementModify").hide()
	$("#definitionModify").hide()
	$("#new_guideline_btn").hide()
	$("#new_statement_btn").hide()
	$("#new_definition_btn").hide()
}

function get_guidelines(){
	close_modify();
	$("#new_guideline_btn").click(function(){
		$("#resultLst").hide()
		$("#guideline_statement").val("")
		$("#guideline_resource").val("")
		$("#guideline_loe_gor").val("")
		$("#guideline_consensus").val("")
		$("#guideline_type").val("")
		$("#guideline_section").val("")
		$("#guideline_unique_id").val("")
		$("#guidelineModify").show()
	})
	$("#new_guideline_btn").show()
	$("#resultLst").html("");
	$.get("curation?type=guidelines",function(data,status){
		if(status=="success"){
			$.each(data,function(unique_id,json_content){
						
				tr=$("<tr>")
				
				td=$("<td width=\"20%\" style=\"vertical-align: top; padding-top: 20px\">")
				btn=$("<button>modify</button>")
				btn.click(function(){
					$("#resultLst").hide()
					$("#guideline_statement").val(json_content["Statement"])
					$("#guideline_resource").val(json_content["Resource"])
					$("#guideline_loe_gor").val(json_content["LoE/GoR"])
					$("#guideline_consensus").val(json_content["Consensus"])
					$("#guideline_type").val(json_content["Type"])
					$("#guideline_section").val(json_content["Section"])
					$("#guideline_unique_id").val(json_content["unique_id"])
					$("#guidelineModify").show()
				})
				td.html(btn)
				tr.append(td)
				
				td=$("<td width=\"80%\" style=\"vertical-align: top; padding-top: 20px\">")
				td.text(json_content['Statement'])
				tr.append(td)
				
				$("#resultLst").append(tr)
			});
		}
	},"json");
	$("#resultLst").show();
}

function save_guideline(){
	var post_data={
		"Statement":$("#guideline_statement").val(),
		"Resource":$("#guideline_resource").val(),
		"LoE/GoR":$("#guideline_loe_gor").val(),
		"Consensus":$("#guideline_consensus").val(),
		"Type":$("#guideline_type").val(),
		"Section":$("#guideline_section").val()
	};
	if ($("#guideline_unique_id").val()!=="")
		post_data["unique_id"]=$("#guideline_unique_id").val();
	$.post("save?type=guidelines",JSON.stringify({"factData":post_data}),function(data,status){
		if (status=="success"){
			alert("save successfully");
			get_guidelines();
		}
	});
}

function get_statements(){
	close_modify();
	$("#resultLst").html("")
	$("#new_statement_btn").click(function(){
		$("#resultLst").hide()
		$("#statement_statement").val("")
		$("#statement_resource").val("")
		$("#statement_unique_id").val("")
		$("#statementModify").show()
	});
	$("#new_statement_btn").show()
	$.get("curation?type=statements",function(data,status){
		if(status=="success"){
			$.each(data,function(unique_id,json_content){
				tr=$("<tr>")
				
				td=$("<td width=\"20%\" style=\"vertical-align: top; padding-top: 20px\">")
				btn=$("<button>modify</button>")
				btn.click(function(){
					$("#resultLst").hide()
					$("#statement_statement").val(json_content["Statement"])
					$("#statement_resource").val(json_content["Resource"])
					$("#statement_unique_id").val(json_content["unique_id"])
					$("#statementModify").show()
				})
				td.html(btn)
				tr.append(td)
				
				td=$("<td width=\"80%\" style=\"vertical-align: top; padding-top: 20px\">")
				td.text(json_content['Statement'])
				tr.append(td)
				
				$("#resultLst").append(tr)
			});
		}
	},"json");
	$("#resultLst").show();
}

function save_statement(){
	var post_data={
		"Statement":$("#statement_statement").val(),
		"Resource":$("#statement_resource").val()
	};
	if ($("#statement_unique_id").val()!=="")
		post_data["unique_id"]=$("#statement_unique_id").val();
	$.post("/save?type=statements",JSON.stringify({"factData":post_data}),function(data,status){
		if (status=="success"){
			alert("save successfully");
			get_statements();
		}
	});
}

function get_definitions(){
	close_modify();
	$("#resultLst").html("")
	$("#new_definition_btn").click(function(){
		$("#resultLst").hide()
		$("#definition_term").val("")
		$("#definition_definition").val("")
		$("#definition_keyword").val("")
		$("#definition_definition_type").val("")
		$("#definition_resource").val("")
		$("#definition_unique_id").val("")
		$("#definitionModify").show()
	});
	$("#new_definition_btn").show()
	$.get("curation?type=definitions",function(data,status){
		if(status=="success"){
			$.each(data,function(unique_id,json_content){
				tr=$("<tr>")
				
				td=$("<td width=\"15%\" style=\"vertical-align: top; padding-top: 20px\">")
				btn=$("<button>modify</button>")
				btn.click(function(){
					$("#resultLst").hide()
					$("#definition_term").val(json_content["Term"])
					$("#definition_definition").val(json_content["Definition"])
					$("#definition_keyword").val(json_content["Keyword"])
					$("#definition_definition_type").val(json_content["Definition Type"])
					$("#definition_resource").val(json_content["Resource"])
					$("#definition_unique_id").val(json_content["unique_id"])
					$("#statementModify").show()
				})
				td.html(btn)
				tr.append(td)
				
				td=$("<td width=\"15%\" style=\"vertical-align: top; padding-top: 20px\">")
				td.text(json_content['Term'])
				tr.append(td)
				
				td=$("<td width=\"70%\" style=\"vertical-align: top; padding-top: 20px\">")
				td.text(json_content['Definition'])
				tr.append(td)
				
				$("#resultLst").append(tr)
			});
		}
	},"json");
	$("#resultLst").show();
}

function save_definition(){
	var post_data={
		"Term":$("#definition_term").val(),
		"Definition":$("#definition_definition").val(),
		"Keyword":$("#definition_keyword").val(),
		"Definition Type":$("#definition_definition_type").val(),
		"Resource":$("#definition_resource").val()
	};
	if ($("#definition_unique_id").val()!=="")
		post_data["unique_id"]=$("#definition_unique_id").val();
	$.post("/save?type=definitions",JSON.stringify({"factData":post_data}),function(data,status){
		if (status=="success"){
			alert("save successfully");
			get_definitions();
		}
	});
}

$(document).ready(function(){
	get_guidelines();
})
</script>
</head>
<body>
<table>
<tr>
<td>
<button id="new_guideline_btn">new</button>
<button id="new_statement_btn">new</button>
<button id="new_definition_btn">new</button>
</td>
<td>
<button onclick="get_guidelines();">guidelines</button>
</td>
<td>
<button onclick="get_statements();">statements</button>
</td>
<td>
<button onclick="get_definitions();" style="display:none">definitions</button>
</td>
</tr>
</table>

<table id="resultLst" width="80%">
</table>

<table id="guidelineModify" style="display:hidden">
<tr>
	<td><button onclick="save_guideline();">save</button></td>
</tr>
<tr>
	<td>Statement</td>
	<td><textarea id="guideline_statement" rows="4" cols="50"></textarea></td>
</tr>
<tr>
	<td>Resource</td>
	<td><textarea id="guideline_resource" rows="4" cols="50"></textarea></td>
</tr>
<tr>
	<td>LoE/GoR</td>
	<td><textarea id="guideline_loe_gor" rows="4" cols="50"></textarea></td>
</tr>
<tr>
	<td>Consensus</td>
	<td><textarea id="guideline_consensus" rows="4" cols="50"></textarea></td>
</tr>
<tr>
	<td>Type</td>
	<td><textarea id="guideline_type" rows="4" cols="50"></textarea></td>
</tr>
<tr>
	<td>Section</td>
	<td><textarea id="guideline_section" rows="4" cols="50"></textarea></td>
</tr>
</table>
<input id="guideline_unique_id" type="hidden"></input>

<table id="statementModify" style="display:hidden">
<tr>
	<td><button onclick="save_statement();">save</button></td>
</tr>
<tr>
	<td>Statement</td>
	<td><textarea id="statement_statement" rows="4" cols="50"></textarea></td>
</tr>
<tr>
	<td>Resource</td>
	<td><textarea id="statement_resource" rows="4" cols="50"></textarea></td>
</tr>
</table>
<input id="statement_unique_id" type="hidden"></input>

<table id="definitionModify" style="display:hidden">
<tr>
	<td><button onclick="save_definition();">save</button></td>
</tr>
<tr>
	<td>Term</td>
	<td><textarea id="definition_term" rows="4" cols="50"></textarea></td>
</tr>
<tr>
	<td>Definition</td>
	<td><textarea id="definition_definition" rows="4" cols="50"></textarea></td>
</tr>
<tr>
	<td>Keyword</td>
	<td><textarea id="definition_keyword" rows="4" cols="50"></textarea></td>
</tr>
<tr>
	<td>Definition Type</td>
	<td><textarea id="definition_definition_type" rows="4" cols="50"></textarea></td>
</tr>
<tr>
	<td>Resource</td>
	<td><textarea id="definition_resource" rows="4" cols="50"></textarea></td>
</tr>
</table>
<input id="definition_unique_id" type="hidden"></input>

</body>
</html>






